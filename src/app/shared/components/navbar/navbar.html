<nav class="sticky top-0 w-full z-50">
  <div class="flex justify-between lg:justify-around px-4 lg:px-8 py-1 items-center bg-indigo-500">
    <!--Home & Logo-->
    <a routerLink="/" class="shrink-0 hover:cursor-pointer">
      <div class="flex items-center">
        <svg
          class="w-8 h-8 text-gray-800 dark:text-white"
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M11.293 3.293a1 1 0 0 1 1.414 0l6 6 2 2a1 1 0 0 1-1.414 1.414L19 12.414V19a2 2 0 0 1-2 2h-3a1 1 0 0 1-1-1v-3h-2v3a1 1 0 0 1-1 1H7a2 2 0 0 1-2-2v-6.586l-.293.293a1 1 0 0 1-1.414-1.414l2-2 6-6Z"
          />
        </svg>
        <p class="hidden lg:block ml-2 text-4xl pb-1 text-white">miniEcommerce</p>
      </div>
    </a>

    <!--Search-->
    <div class="relative flex items-center">

      <input
        type="text"
        class="lg:grow max-w-sm lg:min-w-3xs lg:max-w-md bg-white px-4 placeholder:opacity-70 focus:outline-none focus:ring-2 focus:ring-emerald-300 transition duration-200 ease-in-out"
        placeholder="ค้นหา...."
        [formControl]="searchBox"
      />

      <ul *ngIf="filteredProduct.length > 0 && searchBox.value" class="absolute bg-white top-full w-full max-w-sm lg:max-w-md border border-gray-100 shadow-lg overflow-hidden z-50 transform origin-top">
        <li *ngFor="let item of filteredProduct" 
        class="flex items-center p-2 space-x-3 text-sm text-black cursor-pointer hover:bg-indigo-50 transition duration-150 ease-in-out border-b border-gray-50"
        (click)="onSearchProduct(item.id)"
        >
          <img [src]="item.imageurl" class="w-8 h-8">
          <p class="truncate">{{item.name}}</p>
          <p>{{item.price |currency:'฿':'symbol':'1.0-2'}}</p>
        </li>
      </ul>
    </div>

    <!--Cart & Profile-->
    <div class="flex shrink-0 space-x-1 lg:space-x-4">
      <!--Cart-->
      <a routerLink="/cart" class="relative hover:cursor-pointer">
        <svg
          class="w-6 h-6 lg:w-8 lg:h-8 text-gray-800 dark:text-white"
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M4 4a1 1 0 0 1 1-1h1.5a1 1 0 0 1 .979.796L7.939 6H19a1 1 0 0 1 .979 1.204l-1.25 6a1 1 0 0 1-.979.796H9.605l.208 1H17a3 3 0 1 1-2.83 2h-2.34a3 3 0 1 1-4.009-1.76L5.686 5H5a1 1 0 0 1-1-1Z"
          />
        </svg>
        <span [ngClass]="{'opacity-100': productsInCart >= 1}" class="absolute opacity-0 transition-opacity duration-200 ease-in-out min-w-4 min-h-4 lg:min-w-5 lg:min-h-5 bg-emerald-500 text-white text-xs lg:text-sm text-center rounded-full -top-1 left-3 lg:-top-0.5 lg:left-5 op">{{productsInCart}}</span>
      </a>

      <p class="text-white lg:text-xl">|</p>

      <!--User-->
      <a [routerLink]="['profile', userID]" class="hover:cursor-pointer">
        <svg
          class="w-6 h-6 lg:w-8 lg:h-8 text-gray-800 dark:text-white"
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M12 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm-2 9a4 4 0 0 0-4 4v1a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-1a4 4 0 0 0-4-4h-4Z"
          />
        </svg>
      </a>
    </div>
  </div>
</nav>
